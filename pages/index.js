import Head from "next/head"
import { useContext } from "../components/ContextProvider"
import Link from "../components/Link"
import { TodoList } from "../components/TodoList"
import { TaskList } from "../components/TaskList"

export default function Home() {
  const { state, currentCategory, filter, toggleFilter } = useContext()

  const handleToggle = () => toggleFilter(!filter)

  return (
    <div>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <TodoList></TodoList>
      <Link href="/category/create">Create a new todo!</Link>
      <Link href="/task/create">Create a newtask!</Link>
      <button onClick={handleToggle}>Only show completed tasks ?</button>
      {currentCategory > state.length - 1 ? (
        <h3>This todo-list has been deleted!</h3>
      ) : (
        <TaskList
          state={state}
          currentCategory={currentCategory}
          onlyCompleted={filter}
        ></TaskList>
      )}
    </div>
  )
}
